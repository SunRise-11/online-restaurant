<!DOCTYPE html>
<html lang="en">

<head>
  

 <title>Menu List</title>
</head>

<body>
  <div id="mealDiv">
    <form id="orderForm" action="/meal" method="post">

    </form>

  </div>


  <!--
    This section is the script that will
    run on each page load to fetch the list of meals
    and add them to the body 
   -->
  <script>
  /*
  Use the browsers `fetch` API to make a GET call to /meal
  We expect the response to be a JSON list of meal, of the
  form :
  [
    {"Food":"...","Price":"...", "Image":"..."},
    {"Food":"...","Price":"...", "Image":"..."}
  ]
  */
  fetch("/meal")
    .then(response => response.json())
    .then(mealList => {
      //Once we fetch the list, we iterate over it
        mealList.forEach(meal => {
        // get the data for meal 
        Food = document.createElement("p")
        Food.innerHTML = meal.foodName
        Food.classList.add("mealStyle")
        Price = document.createElement("p")
        Price.innerHTML = '$'+ meal.cost
        Price.classList.add("priceStyle")
        Image = document.createElement("img")
        PreLink= "/static/images/"
        Image.src = PreLink + meal.imagelink
        Image.classList.add("imageStyle")
        //Order btn
        OrderBtn= document.createElement("input")
        OrderBtn.type= "checkbox"
        OrderBtn.classList.add("orderBtn")
        OrderBtn.name= "foodName"
        OrderedMeal= "Ordered Meal=" + meal.foodName + " at price=" + " $" + meal.cost 
        OrderBtn.value= OrderedMeal
        //Order Label
        OrderLbl= document.createElement("label")
        OrderLbl.innerHTML= "Order"
        OrderLbl.classList.add("orderBtn")
        //checkout btn
        Checkout= document.createElement("button")
        Checkout.href= ""
        // "/static/order.html"
        Checkout.innerHTML= " Proceed to Checkout"
        Checkout.classList.add("checkoutBtn")
        Checkout.type= "submit"

        //create new div variables to contain each meal
        newDiv = document.createElement("div")
        newDiv.appendChild(Image)
        newDiv.appendChild(Food)
        newDiv.appendChild(Price)
        newDiv.appendChild(OrderBtn)
        newDiv.appendChild(OrderLbl)
        newDiv.appendChild(Checkout)

        // Add new divs to already existing div in body of html
        var form = document.getElementById("orderForm");
        form.appendChild(newDiv)
        
      })
    })
  </script>

</body>

</html>






